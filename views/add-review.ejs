<div id="review-modal" class="modal">
  <div class="modal-content">
    <h2>âœ¨ Add a Review</h2>
    <form id="add-review-form" action="/reviews" method="POST">
      <input type="text" name="bookId" value="<%= book.id %>" hidden />

      <label for="reviewer">ğŸ‘¤ Your Name:</label>
      <input
        type="text"
        name="reviewer"
        value="<%= user ? user.username : '' %>"
        readonly
        required
      />

      <label for="rating">â­ Rating (1-5):</label>
      <select name="rating" required>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
      </select>

      <label for="reviewText">ğŸ“ Your Review:</label>
      <textarea name="reviewText" required></textarea>

      <button type="submit">ğŸš€ Submit Review</button>
    </form>

    <div id="loadingMessage" style="display: none">
      <p>ğŸŒ Submitting your review...</p>
    </div>

    <div id="successMessage" style="display: none">
      <p>ğŸ‰ Review submitted successfully!</p>
    </div>
  </div>
</div>

<script>
  const form = document.getElementById("add-review-form");
  const loadingMessage = document.getElementById("loadingMessage");
  const successMessage = document.getElementById("successMessage");

  form.addEventListener("submit", (event) => {
    loadingMessage.style.display = "block";
    successMessage.style.display = "none";

    event.preventDefault();

    setTimeout(() => {
      loadingMessage.style.display = "none";
      successMessage.style.display = "block";

      setTimeout(() => {
        form.submit();
      }, 2000);
    }, 2000);
  });
</script>
